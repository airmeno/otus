---
# tasks file for deploy_nginx

- block: ########## CentOS #########
  - name: Epel Repository
    yum:
      name: epel-release
      state: present

  - name: Nginx Install to CentOS
    yum:
      name: nginx     
      state: latest
    notify:
      - restart nginx
  when: ansible_os_family == "RedHat"

- block: ########## Debian & Ubuntu #########
  - name: Nginx Install to Debian & Ubuntu
    apt:
      name: nginx     
      state: latest
    notify:
      - restart nginx
  when: ansible_os_family == "Debian"  

- name: Nginx config file from template
  template:
    src: nginx.conf.j2
    dest: /etc/nginx/nginx.conf
  notify:
    - reload nginx
